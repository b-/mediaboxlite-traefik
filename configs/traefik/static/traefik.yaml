accessLog:
  filePath: "/var/log/traefik/access.log"
  format: json
  # filters:
  #   statusCodes:
  #     - "200-299" # log successful http requests
  #     - "400-599" # log failed http requests
  # collect logs as in-memory buffer before writing into log file
  bufferingSize: 0
  fields:
    headers:
      defaultMode: drop # drop all headers per default
      names:
        User-Agent: keep # log user agent strings
log:
  # format: json
  level: INFO
metrics:
  prometheus:
    buckets:
      - 0.1
      - 0.3
      - 1.2
      - 5.0
api:
  dashboard: true
  insecure: true
  debug: false
providers:
  docker:
    exposedByDefault: false
  redis:
    endpoints:
      - redis://traefik-internal-redis:6379
  file:
    directory: "/config/dynamic"
    watch: true
entryPoints:
  web:
    address: ":80"
    #asDefault: true
    http:
      redirections:
        entryPoint:
          to: websecure
          scheme: https
  websecure:
    asDefault: true
    address: ":443"
    http:
      middlewares:
        - security-headers@file
        - rate-limit@file
      tls:
        certResolver: leresolver
        domains:
          - main: mediaboxlite.ibeep.com
            sans:
              - "*.mediaboxlite.ibeep.com"
              - "*.mediaboxlite.ts.ibeep.com"
              - "*.mediaboxlite.lan.ibeep.com"
              - "*.mediaboxlite.home.ibeep.com"
  ssh:
    address: ":222"
certificatesResolvers:
  leresolver:
    acme:
      email: letsencrypt@ibeep.com
      storage: /certs/acme.json
      caServer: https://acme-v02.api.letsencrypt.org/directory
      # caServer: https://acme-staging-v02.api.letsencrypt.org/directory
      dnsChallenge:
        provider: cloudflare
        resolvers:
          - 8.8.8.8:53
          - 1.1.1.1:53
serversTransport:
  insecureSkipVerify: true
experimental:
  plugins:
    cache:
      moduleName: "github.com/iamolegga/plugin-simplecache"
      version: "v0.3.0"
